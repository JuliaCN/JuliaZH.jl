<!DOCTYPE html>
<html lang="zh-cn"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>æ„é€ å‡½æ•° Â· Juliaä¸­æ–‡æ–‡æ¡£</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-28835595-9', 'auto');
ga('send', 'pageview', {'page': location.pathname + location.search + location.hash});
</script><link rel="canonical" href="https://juliacn.github.io/JuliaZH.jl/latest/manual/constructors/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/julia-manual.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Juliaä¸­æ–‡æ–‡æ¡£ logo"/></a><div class="docs-package-name"><span class="docs-autofit">Juliaä¸­æ–‡æ–‡æ¡£</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">ä¸»é¡µ</a></li><li><span class="tocitem">æ‰‹å†Œ</span><ul><li><a class="tocitem" href="../getting-started/">å…¥é—¨</a></li><li><a class="tocitem" href="../variables/">å˜é‡</a></li><li><a class="tocitem" href="../integers-and-floating-point-numbers/">æ•´æ•°å’Œæµ®ç‚¹æ•°</a></li><li><a class="tocitem" href="../mathematical-operations/">æ•°å­¦è¿ç®—å’Œåˆç­‰å‡½æ•°</a></li><li><a class="tocitem" href="../complex-and-rational-numbers/">å¤æ•°å’Œæœ‰ç†æ•°</a></li><li><a class="tocitem" href="../strings/">å­—ç¬¦ä¸²</a></li><li><a class="tocitem" href="../functions/">å‡½æ•°</a></li><li><a class="tocitem" href="../control-flow/">æµç¨‹æ§åˆ¶</a></li><li><a class="tocitem" href="../variables-and-scoping/">å˜é‡ä½œç”¨åŸŸ</a></li><li><a class="tocitem" href="../types/">ç±»å‹</a></li><li><a class="tocitem" href="../methods/">æ–¹æ³•</a></li><li class="is-active"><a class="tocitem" href>æ„é€ å‡½æ•°</a><ul class="internal"><li><a class="tocitem" href="#å¤–éƒ¨æ„é€ æ–¹æ³•"><span>å¤–éƒ¨æ„é€ æ–¹æ³•</span></a></li><li><a class="tocitem" href="#å†…éƒ¨æ„é€ æ–¹æ³•"><span>å†…éƒ¨æ„é€ æ–¹æ³•</span></a></li><li><a class="tocitem" href="#ä¸å®Œæ•´åˆå§‹åŒ–"><span>ä¸å®Œæ•´åˆå§‹åŒ–</span></a></li><li><a class="tocitem" href="#å‚æ•°ç±»å‹çš„æ„é€ å‡½æ•°"><span>å‚æ•°ç±»å‹çš„æ„é€ å‡½æ•°</span></a></li><li><a class="tocitem" href="#Case-Study:-Rational"><span>Case Study: Rational</span></a></li><li><a class="tocitem" href="#Outer-only-constructors"><span>Outer-only constructors</span></a></li></ul></li><li><a class="tocitem" href="../conversion-and-promotion/">ç±»å‹è½¬æ¢å’Œç±»å‹æå‡</a></li><li><a class="tocitem" href="../interfaces/">æ¥å£</a></li><li><a class="tocitem" href="../modules/">æ¨¡å—</a></li><li><a class="tocitem" href="../documentation/">æ–‡æ¡£</a></li><li><a class="tocitem" href="../metaprogramming/">å…ƒç¼–ç¨‹</a></li><li><a class="tocitem" href="../arrays/">å¤šç»´æ•°ç»„</a></li><li><a class="tocitem" href="../missing/">ç¼ºå¤±å€¼</a></li><li><a class="tocitem" href="../networking-and-streams/">ç½‘ç»œå’Œæµ</a></li><li><a class="tocitem" href="../parallel-computing/">å¹¶è¡Œè®¡ç®—</a></li><li><a class="tocitem" href="../asynchronous-programming/">Asynchronous Programming</a></li><li><a class="tocitem" href="../multi-threading/">å¤šçº¿ç¨‹</a></li><li><a class="tocitem" href="../distributed-computing/">Multi-processing and Distributed Computing</a></li><li><a class="tocitem" href="../running-external-programs/">è¿è¡Œå¤–éƒ¨ç¨‹åº</a></li><li><a class="tocitem" href="../calling-c-and-fortran-code/">è°ƒç”¨ C å’Œ Fortran ä»£ç </a></li><li><a class="tocitem" href="../handling-operating-system-variation/">å¤„ç†æ“ä½œç³»ç»Ÿå·®å¼‚</a></li><li><a class="tocitem" href="../environment-variables/">ç¯å¢ƒå˜é‡</a></li><li><a class="tocitem" href="../embedding/">åµŒå…¥ Julia</a></li><li><a class="tocitem" href="../code-loading/">ä»£ç åŠ è½½</a></li><li><a class="tocitem" href="../profile/">æ€§èƒ½åˆ†æ</a></li><li><a class="tocitem" href="../stacktraces/">æ ˆè·Ÿè¸ª</a></li><li><a class="tocitem" href="../performance-tips/">æ€§èƒ½å»ºè®®</a></li><li><a class="tocitem" href="../workflow-tips/">å·¥ä½œæµç¨‹å»ºè®®</a></li><li><a class="tocitem" href="../style-guide/">ä»£ç é£æ ¼æŒ‡å—</a></li><li><a class="tocitem" href="../faq/">å¸¸è§é—®é¢˜</a></li><li><a class="tocitem" href="../noteworthy-differences/">ä¸å…¶ä»–è¯­è¨€çš„æ˜¾è‘—å·®å¼‚</a></li><li><a class="tocitem" href="../unicode-input/">Unicode è¾“å…¥è¡¨</a></li><li><a class="tocitem" href="../command-line-options/">å‘½ä»¤è¡Œé€‰é¡¹</a></li></ul></li><li><span class="tocitem">Base</span><ul><li><a class="tocitem" href="../../base/base/">åŸºæœ¬åŠŸèƒ½</a></li><li><a class="tocitem" href="../../base/collections/">é›†åˆå’Œæ•°æ®ç»“æ„</a></li><li><a class="tocitem" href="../../base/math/">æ•°å­¦ç›¸å…³</a></li><li><a class="tocitem" href="../../base/numbers/">Numbers</a></li><li><a class="tocitem" href="../../base/strings/">å­—ç¬¦ä¸²</a></li><li><a class="tocitem" href="../../base/arrays/">æ•°ç»„</a></li><li><a class="tocitem" href="../../base/parallel/">Tasks</a></li><li><a class="tocitem" href="../../base/multi-threading/">Multi-Threading</a></li><li><a class="tocitem" href="../../base/constants/">å¸¸é‡</a></li><li><a class="tocitem" href="../../base/file/">æ–‡ä»¶ç³»ç»Ÿ</a></li><li><a class="tocitem" href="../../base/io-network/">I/O ä¸ç½‘ç»œ</a></li><li><a class="tocitem" href="../../base/punctuation/">è¿ç®—ç¬¦ä¸è®°å·</a></li><li><a class="tocitem" href="../../base/sort/">æ’åºåŠç›¸å…³å‡½æ•°</a></li><li><a class="tocitem" href="../../base/iterators/">è¿­ä»£ç›¸å…³</a></li><li><a class="tocitem" href="../../base/c/">C æ¥å£</a></li><li><a class="tocitem" href="../../base/libc/">C æ ‡å‡†åº“</a></li><li><a class="tocitem" href="../../base/stacktraces/">å †æ ˆè·Ÿè¸ª</a></li><li><a class="tocitem" href="../../base/simd-types/">SIMD æ”¯æŒ</a></li></ul></li><li><span class="tocitem">Standard Library</span><ul><li><a class="tocitem" href="../../stdlib/Artifacts/">Artifacts</a></li><li><a class="tocitem" href="../../stdlib/Base64/">Base64</a></li><li><a class="tocitem" href="../../stdlib/CRC32c/">CRC32c</a></li><li><a class="tocitem" href="../../stdlib/Dates/">æ—¥æœŸ</a></li><li><a class="tocitem" href="../../stdlib/DelimitedFiles/">åˆ†éš”ç¬¦æ–‡ä»¶</a></li><li><a class="tocitem" href="../../stdlib/Distributed/">Distributed Computing</a></li><li><a class="tocitem" href="../../stdlib/FileWatching/">æ–‡ä»¶ç›¸å…³äº‹ä»¶</a></li><li><a class="tocitem" href="../../stdlib/Future/">Future</a></li><li><a class="tocitem" href="../../stdlib/InteractiveUtils/">Interactive Utilities</a></li><li><a class="tocitem" href="../../stdlib/LazyArtifacts/">Lazy Artifacts</a></li><li><a class="tocitem" href="../../stdlib/LibGit2/">LibGit2</a></li><li><a class="tocitem" href="../../stdlib/Libdl/">åŠ¨æ€é“¾æ¥å™¨</a></li><li><a class="tocitem" href="../../stdlib/LinearAlgebra/">Linear Algebra</a></li><li><a class="tocitem" href="../../stdlib/Logging/">æ—¥å¿—è®°å½•</a></li><li><a class="tocitem" href="../../stdlib/Markdown/">Markdown</a></li><li><a class="tocitem" href="../../stdlib/Mmap/">å†…å­˜æ˜ å°„ I/O</a></li><li><a class="tocitem" href="../../stdlib/Printf/">Printf</a></li><li><a class="tocitem" href="../../stdlib/Profile/">æ€§èƒ½åˆ†æ</a></li><li><a class="tocitem" href="../../stdlib/REPL/">Julia REPL</a></li><li><a class="tocitem" href="../../stdlib/Random/">éšæœºæ•°</a></li><li><a class="tocitem" href="../../stdlib/SHA/">SHA</a></li><li><a class="tocitem" href="../../stdlib/Serialization/">åºåˆ—åŒ–</a></li><li><a class="tocitem" href="../../stdlib/SharedArrays/">å…±äº«æ•°ç»„</a></li><li><a class="tocitem" href="../../stdlib/Sockets/">å¥—æ¥å­—</a></li><li><a class="tocitem" href="../../stdlib/SparseArrays/">ç¨€ç–æ•°ç»„</a></li><li><a class="tocitem" href="../../stdlib/Statistics/">ç»Ÿè®¡</a></li><li><a class="tocitem" href="../../stdlib/TOML/">TOML</a></li><li><a class="tocitem" href="../../stdlib/Test/">å•å…ƒæµ‹è¯•</a></li><li><a class="tocitem" href="../../stdlib/UUIDs/">UUIDs</a></li><li><a class="tocitem" href="../../stdlib/Unicode/">Unicode</a></li></ul></li><li><span class="tocitem">Developer Documentation</span><ul><li><a class="tocitem" href="../../devdocs/reflection/">åå°„ ä¸ è‡ªæˆ‘æ£€æŸ¥</a></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Documentation of Julia&#39;s Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../devdocs/init/">Julia è¿è¡Œæ—¶çš„åˆå§‹åŒ–</a></li><li><a class="tocitem" href="../../devdocs/ast/">Julia çš„ AST</a></li><li><a class="tocitem" href="../../devdocs/types/">More about types</a></li><li><a class="tocitem" href="../../devdocs/object/">Memory layout of Julia Objects</a></li><li><a class="tocitem" href="../../devdocs/eval/">Julia ä»£ç çš„ eval</a></li><li><a class="tocitem" href="../../devdocs/callconv/">Calling Conventions</a></li><li><a class="tocitem" href="../../devdocs/compiler/">æœ¬æœºä»£ç ç”Ÿæˆè¿‡ç¨‹çš„é«˜çº§æ¦‚è¿°</a></li><li><a class="tocitem" href="../../devdocs/functions/">Julia å‡½æ•°</a></li><li><a class="tocitem" href="../../devdocs/cartesian/">ç¬›å¡å°”</a></li><li><a class="tocitem" href="../../devdocs/meta/">Talking to the compiler (the <code>:meta</code> mechanism)</a></li><li><a class="tocitem" href="../../devdocs/subarrays/">å­æ•°ç»„</a></li><li><a class="tocitem" href="../../devdocs/isbitsunionarrays/">isbits Union Optimizations</a></li><li><a class="tocitem" href="../../devdocs/sysimg/">System Image Building</a></li><li><a class="tocitem" href="../../devdocs/llvm/">Working with LLVM</a></li><li><a class="tocitem" href="../../devdocs/stdio/">printf() and stdio in the Julia runtime</a></li><li><a class="tocitem" href="../../devdocs/boundscheck/">è¾¹ç•Œæ£€æŸ¥</a></li><li><a class="tocitem" href="../../devdocs/locks/">Proper maintenance and care of multi-threading locks</a></li><li><a class="tocitem" href="../../devdocs/offset-arrays/">Arrays with custom indices</a></li><li><a class="tocitem" href="../../devdocs/require/">Module loading</a></li><li><a class="tocitem" href="../../devdocs/inference/">ç±»å‹æ¨å¯¼</a></li><li><a class="tocitem" href="../../devdocs/ssair/">Julia SSA-form IR</a></li><li><a class="tocitem" href="../../devdocs/gc-sa/">Static analyzer annotations for GC correctness in C code</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Developing/debugging Julia&#39;s C code</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../devdocs/backtraces/">æŠ¥å‘Šå’Œåˆ†æå´©æºƒï¼ˆæ®µé”™è¯¯ï¼‰</a></li><li><a class="tocitem" href="../../devdocs/debuggingtips/">gdb è°ƒè¯•æç¤º</a></li><li><a class="tocitem" href="../../devdocs/valgrind/">åœ¨Juliaä¸­ä½¿ç”¨Valgrind</a></li><li><a class="tocitem" href="../../devdocs/sanitizers/">Sanitizer support</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">æ‰‹å†Œ</a></li><li class="is-active"><a href>æ„é€ å‡½æ•°</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>æ„é€ å‡½æ•°</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://www.transifex.com/juliacn/manual-zh_cn/translate/#zh_CN/constructorsmd" title=" å®Œå–„ Transifex ä¸Šçš„ç¿»è¯‘"><span class="docs-icon fab">ï‚¬</span><span class="docs-label is-hidden-touch"> å®Œå–„ Transifex ä¸Šçš„ç¿»è¯‘</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="è®¾ç½®"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="man-constructors"><a class="docs-heading-anchor" href="#man-constructors">æ„é€ å‡½æ•°</a><a id="man-constructors-1"></a><a class="docs-heading-anchor-permalink" href="#man-constructors" title="Permalink"></a></h1><p>æ„é€ å‡½æ•° <sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup> æ˜¯ç”¨æ¥åˆ›å»ºæ–°å¯¹è±¡çš„å‡½æ•° â€“ ç¡®åˆ‡åœ°è¯´ï¼Œå®ƒåˆ›å»ºçš„æ˜¯<a href="../types/#å¤åˆç±»å‹">å¤åˆç±»å‹</a>çš„å®ä¾‹ã€‚åœ¨ Julia ä¸­ï¼Œç±»å‹å¯¹è±¡ä¹ŸåŒæ—¶å……å½“æ„é€ å‡½æ•°çš„è§’è‰²ï¼šå¯ä»¥ç”¨ç±»ååŠ å‚æ•°å…ƒç»„çš„æ–¹å¼åƒå‡½æ•°è°ƒç”¨ä¸€æ ·æ¥åˆ›å»ºæ–°å®ä¾‹ã€‚è¿™ä¸€ç‚¹åœ¨ä»‹ç»å¤åˆç±»å‹ï¼ˆComposite Typesï¼‰æ—¶å·²ç»å¤§è‡´è°ˆè¿‡äº†ã€‚ä¾‹å¦‚ï¼š</p><pre><code class="language-julia-repl">julia&gt; struct Foo
           bar
           baz
       end

julia&gt; foo = Foo(1, 2)
Foo(1, 2)

julia&gt; foo.bar
1

julia&gt; foo.baz
2</code></pre><p>å¯¹å¾ˆå¤šç±»å‹æ¥è¯´ï¼Œé€šè¿‡ç»™æ‰€æœ‰å­—æ®µèµ‹å€¼æ¥åˆ›å»ºæ–°å¯¹è±¡çš„è¿™ç§æ–¹å¼å°±è¶³ä»¥ç”¨äºäº§ç”Ÿæ–°å®ä¾‹äº†ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å½¢ä¸‹ï¼Œåˆ›å»ºå¤åˆå¯¹è±¡éœ€è¦æ›´å¤šçš„åŠŸèƒ½ã€‚æœ‰æ—¶å¿…é¡»é€šè¿‡æ£€æŸ¥æˆ–è½¬åŒ–å‚æ•°æ¥ç¡®ä¿å›ºæœ‰å±æ€§ä¸å˜ã€‚<a href="https://en.wikipedia.org/wiki/Recursion_%28computer_science%29#Recursive_data_structures_.28structural_recursion.29">é€’å½’æ•°æ®ç»“æ„</a>ï¼Œç‰¹åˆ«æ˜¯é‚£äº›å¯èƒ½å¼•ç”¨è‡ªèº«çš„æ•°æ®ç»“æ„ï¼Œå®ƒä»¬é€šå¸¸ä¸èƒ½è¢«å¹²å‡€åœ°æ„é€ ï¼Œè€Œæ˜¯éœ€è¦é¦–å…ˆè¢«ä¸å®Œæ•´åœ°æ„é€ ï¼Œç„¶åå†é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼å®Œæˆè¡¥å…¨ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œæœ‰æ—¶éœ€è¦ç”¨è¾ƒå°‘çš„å‚æ•°æˆ–è€…ä¸åŒç±»å‹çš„å‚æ•°æ¥åˆ›å»ºå¯¹è±¡ï¼ŒJulia çš„å¯¹è±¡æ„é€ ç³»ç»Ÿè§£å†³äº†æ‰€æœ‰è¿™äº›é—®é¢˜ã€‚</p><h2 id="å¤–éƒ¨æ„é€ æ–¹æ³•"><a class="docs-heading-anchor" href="#å¤–éƒ¨æ„é€ æ–¹æ³•">å¤–éƒ¨æ„é€ æ–¹æ³•</a><a id="å¤–éƒ¨æ„é€ æ–¹æ³•-1"></a><a class="docs-heading-anchor-permalink" href="#å¤–éƒ¨æ„é€ æ–¹æ³•" title="Permalink"></a></h2><p>æ„é€ å‡½æ•°ä¸ Julia ä¸­çš„å…¶ä»–ä»»ä½•å‡½æ•°ä¸€æ ·ï¼Œå…¶æ•´ä½“è¡Œä¸ºç”±å…¶å„ä¸ªæ–¹æ³•çš„ç»„åˆè¡Œä¸ºå®šä¹‰ã€‚å› æ­¤ï¼Œåªè¦å®šä¹‰æ–°æ–¹æ³•å°±å¯ä»¥å‘æ„é€ å‡½æ•°æ·»åŠ åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³ä¸º <code>Foo</code> å¯¹è±¡æ·»åŠ ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åªæ¥å—ä¸€ä¸ªå‚æ•°å¹¶å…¶ä½œä¸º <code>bar</code> å’Œ <code>baz</code> çš„å€¼ã€‚è¿™å¾ˆç®€å•ï¼š</p><pre><code class="language-julia-repl">julia&gt; Foo(x) = Foo(x,x)
Foo

julia&gt; Foo(1)
Foo(1, 1)</code></pre><p>ä½ ä¹Ÿå¯ä»¥ä¸º <code>Foo</code> æ·»åŠ æ–°çš„é›¶å‚æ•°æ„é€ æ–¹æ³•ï¼Œå®ƒä¸º <code>bar</code> å’Œ <code>baz</code> æä¾›é»˜è®¤å€¼ï¼š</p><pre><code class="language-julia-repl">julia&gt; Foo() = Foo(0)
Foo

julia&gt; Foo()
Foo(0, 0)</code></pre><p>è¿™é‡Œé›¶å‚æ•°æ„é€ æ–¹æ³•ä¼šè°ƒç”¨å•å‚æ•°æ„é€ æ–¹æ³•ï¼Œå•å‚æ•°æ„é€ æ–¹æ³•åˆè°ƒç”¨äº†è‡ªåŠ¨æä¾›é»˜è®¤å€¼çš„åŒå‚æ•°æ„é€ æ–¹æ³•ã€‚ä¸Šé¢é™„åŠ çš„è¿™ç±»æ„é€ æ–¹æ³•ï¼Œå®ƒä»¬çš„å£°æ˜æ–¹å¼ä¸æ™®é€šçš„æ–¹æ³•ä¸€æ ·ï¼Œåƒè¿™æ ·çš„æ„é€ æ–¹æ³•è¢«ç§°ä¸º<strong>å¤–éƒ¨</strong>æ„é€ æ–¹æ³•ï¼Œä¸‹æ–‡å¾ˆå¿«å°±ä¼šæ­ç¤ºè¿™æ ·ç§°å‘¼çš„åŸå› ã€‚å¤–éƒ¨æ„é€ æ–¹æ³•åªèƒ½é€šè¿‡è°ƒç”¨å…¶ä»–æ„é€ æ–¹æ³•æ¥åˆ›å»ºæ–°å®ä¾‹ï¼Œæ¯”å¦‚è‡ªåŠ¨æä¾›é»˜è®¤å€¼çš„æ„é€ æ–¹æ³•ã€‚</p><h2 id="å†…éƒ¨æ„é€ æ–¹æ³•"><a class="docs-heading-anchor" href="#å†…éƒ¨æ„é€ æ–¹æ³•">å†…éƒ¨æ„é€ æ–¹æ³•</a><a id="å†…éƒ¨æ„é€ æ–¹æ³•-1"></a><a class="docs-heading-anchor-permalink" href="#å†…éƒ¨æ„é€ æ–¹æ³•" title="Permalink"></a></h2><p>å°½ç®¡å¤–éƒ¨æ„é€ æ–¹æ³•å¯ä»¥æˆåŠŸåœ°ä¸ºæ„é€ å¯¹è±¡æä¾›äº†é¢å¤–çš„ä¾¿åˆ©ï¼Œä½†å®ƒæ— æ³•è§£å†³å¦å¤–ä¸¤ä¸ªåœ¨æœ¬ç« å¯¼è¨€é‡Œæåˆ°çš„é—®é¢˜ï¼šç¡®ä¿å›ºæœ‰å±æ€§ä¸å˜å’Œå…è®¸åˆ›å»ºè‡ªå¼•ç”¨å¯¹è±¡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦<strong>å†…éƒ¨</strong>æ„é€ æ–¹æ³•ã€‚å†…éƒ¨æ„é€ æ–¹æ³•å’Œå¤–éƒ¨æ„é€ æ–¹æ³•å¾ˆç›¸åƒï¼Œä½†æœ‰ä¸¤ç‚¹ä¸åŒï¼š</p><ol><li>å†…éƒ¨æ„é€ æ–¹æ³•åœ¨ç±»å‹å£°æ˜ä»£ç å—çš„å†…éƒ¨ï¼Œè€Œä¸æ˜¯å’Œæ™®é€šæ–¹æ³•ä¸€æ ·åœ¨å¤–éƒ¨ã€‚</li><li>å†…éƒ¨æ„é€ æ–¹æ³•èƒ½å¤Ÿè®¿é—®ä¸€ä¸ªç‰¹æ®Šçš„å±€éƒ¨å‡½æ•° <a href="../../base/base/#new"><code>new</code></a>ï¼Œæ­¤å‡½æ•°èƒ½å¤Ÿåˆ›å»ºè¯¥ç±»å‹çš„å¯¹è±¡ã€‚</li></ol><p>ä¾‹å¦‚ï¼Œå‡è®¾ä½ è¦å£°æ˜ä¸€ä¸ªä¿å­˜ä¸€å¯¹å®æ•°çš„ç±»å‹ï¼Œä½†è¦çº¦æŸç¬¬ä¸€ä¸ªæ•°ä¸å¤§äºç¬¬äºŒä¸ªæ•°ã€‚ä½ å¯ä»¥åƒè¿™æ ·å£°æ˜å®ƒï¼š</p><pre><code class="language-julia-repl">julia&gt; struct OrderedPair
           x::Real
           y::Real
           OrderedPair(x,y) = x &gt; y ? error(&quot;out of order&quot;) : new(x,y)
       end</code></pre><p>ç°åœ¨ <code>OrderedPair</code> å¯¹è±¡åªèƒ½åœ¨ <code>x &lt;= y</code> æ—¶è¢«æˆåŠŸæ„é€ ï¼š</p><pre><code class="language-julia-repl">julia&gt; OrderedPair(1, 2)
OrderedPair(1, 2)

julia&gt; OrderedPair(2,1)
ERROR: out of order
Stacktrace:
 [1] error at ./error.jl:33 [inlined]
 [2] OrderedPair(::Int64, ::Int64) at ./none:4
 [3] top-level scope</code></pre><p>å¦‚æœç±»å‹è¢«å£°æ˜ä¸º <code>mutable</code>ï¼Œä½ å¯ä»¥ç›´æ¥æ›´æ”¹å­—æ®µå€¼æ¥æ‰“ç ´è¿™ä¸ªå›ºæœ‰å±æ€§ï¼Œç„¶è€Œï¼Œåœ¨æœªç»å…è®¸çš„æƒ…å†µä¸‹ï¼Œéšæ„æ‘†å¼„å¯¹è±¡çš„å†…æ ¸ä¸€èˆ¬éƒ½æ˜¯ä¸å¥½çš„è¡Œä¸ºã€‚ä½ ï¼ˆæˆ–è€…å…¶ä»–äººï¼‰å¯ä»¥åœ¨ä»¥åä»»ä½•æ—¶å€™æä¾›é¢å¤–çš„å¤–éƒ¨æ„é€ æ–¹æ³•ï¼Œä½†ä¸€æ—¦ç±»å‹è¢«å£°æ˜äº†ï¼Œå°±æ²¡æœ‰åŠæ³•æ¥æ·»åŠ æ›´å¤šçš„å†…éƒ¨æ„é€ æ–¹æ³•äº†ã€‚ç”±äºå¤–éƒ¨æ„é€ æ–¹æ³•åªèƒ½é€šè¿‡è°ƒç”¨å…¶å®ƒçš„æ„é€ æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ï¼Œæ‰€ä»¥æœ€ç»ˆæ„é€ å¯¹è±¡çš„ä¸€å®šæ˜¯æŸä¸ªå†…éƒ¨æ„é€ å‡½æ•°ã€‚è¿™ä¿è¯äº†å·²å£°æ˜ç±»å‹çš„å¯¹è±¡å¿…é¡»é€šè¿‡è°ƒç”¨è¯¥ç±»å‹çš„å†…éƒ¨æ„é€ æ–¹æ³•æ‰å¾—å·²å­˜åœ¨ï¼Œä»è€Œåœ¨æŸç§ç¨‹åº¦ä¸Šä¿è¯äº†ç±»å‹çš„å›ºæœ‰å±æ€§ã€‚</p><p>åªè¦å®šä¹‰äº†ä»»ä½•ä¸€ä¸ªå†…éƒ¨æ„é€ æ–¹æ³•ï¼ŒJulia å°±ä¸ä¼šå†æä¾›é»˜è®¤çš„æ„é€ æ–¹æ³•ï¼šå®ƒä¼šå‡å®šä½ å·²ç»ä¸ºè‡ªå·±æä¾›äº†æ‰€éœ€çš„æ‰€æœ‰å†…éƒ¨æ„é€ æ–¹æ³•ã€‚é»˜è®¤æ„é€ æ–¹æ³•ç­‰æ•ˆäºä¸€ä¸ªä½ è‡ªå·±ç¼–å†™çš„å†…éƒ¨æ„é€ å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†æ‰€æœ‰æˆå‘˜ä½œä¸ºå‚æ•°ï¼ˆå¦‚æœç›¸åº”çš„å­—æ®µå…·æœ‰ç±»å‹ï¼Œåˆ™çº¦æŸä¸ºæ­£ç¡®çš„ç±»å‹ï¼‰ï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’ç»™ <code>new</code>ï¼Œæœ€åè¿”å›ç»“æœå¯¹è±¡ï¼š</p><pre><code class="language-julia-repl">julia&gt; struct Foo
           bar
           baz
           Foo(bar,baz) = new(bar,baz)
       end
</code></pre><p>è¿™ä¸ªå£°æ˜ä¸å‰é¢æ²¡æœ‰æ˜¾å¼å†…éƒ¨æ„é€ æ–¹æ³•çš„ <code>Foo</code> ç±»å‹çš„å®šä¹‰æ•ˆæœç›¸åŒã€‚ ä»¥ä¸‹ä¸¤ä¸ªç±»å‹æ˜¯ç­‰ä»·çš„ â€“ ä¸€ä¸ªå…·æœ‰é»˜è®¤æ„é€ æ–¹æ³•ï¼Œå¦ä¸€ä¸ªå…·æœ‰æ˜¾å¼æ„é€ æ–¹æ³•ï¼š</p><pre><code class="language-julia-repl">julia&gt; struct T1
           x::Int64
       end

julia&gt; struct T2
           x::Int64
           T2(x) = new(x)
       end

julia&gt; T1(1)
T1(1)

julia&gt; T2(1)
T2(1)

julia&gt; T1(1.0)
T1(1)

julia&gt; T2(1.0)
T2(1)</code></pre><p>æä¾›å°½å¯èƒ½å°‘çš„å†…éƒ¨æ„é€ æ–¹æ³•æ˜¯ä¸€ç§è‰¯å¥½çš„å½¢å¼ï¼šä»…åœ¨éœ€è¦æ˜¾å¼åœ°å¤„ç†æ‰€æœ‰å‚æ•°ï¼Œä»¥åŠå¼ºåˆ¶æ‰§è¡Œå¿…è¦çš„é”™è¯¯æ£€æŸ¥å’Œè½¬æ¢æ—¶å€™æ‰ä½¿ç”¨å†…éƒ¨æ„é€ ã€‚å…¶å®ƒç”¨äºæä¾›ä¾¿åˆ©çš„æ„é€ æ–¹æ³•ï¼Œæ¯”å¦‚æä¾›é»˜è®¤å€¼æˆ–è¾…åŠ©è½¬æ¢ï¼Œåº”è¯¥å®šä¹‰ä¸ºå¤–éƒ¨æ„é€ å‡½æ•°ï¼Œç„¶åå†é€šè¿‡è°ƒç”¨å†…éƒ¨æ„é€ å‡½æ•°æ¥æ‰§è¡Œç¹é‡çš„å·¥ä½œã€‚è¿™ç§è§£è€¦æ˜¯å¾ˆè‡ªç„¶çš„ã€‚</p><h2 id="ä¸å®Œæ•´åˆå§‹åŒ–"><a class="docs-heading-anchor" href="#ä¸å®Œæ•´åˆå§‹åŒ–">ä¸å®Œæ•´åˆå§‹åŒ–</a><a id="ä¸å®Œæ•´åˆå§‹åŒ–-1"></a><a class="docs-heading-anchor-permalink" href="#ä¸å®Œæ•´åˆå§‹åŒ–" title="Permalink"></a></h2><p>æœ€åä¸€ä¸ªè¿˜æ²¡æåˆ°çš„é—®é¢˜æ˜¯ï¼Œå¦‚ä½•æ„é€ å…·æœ‰è‡ªå¼•ç”¨çš„å¯¹è±¡ï¼Œæ›´å¹¿ä¹‰åœ°æ¥è¯´æ˜¯æ„é€ é€’å½’æ•°æ®ç»“æ„ã€‚ç”±äºè¿™å…¶ä¸­çš„å›°éš¾å¹¶ä¸æ˜¯é‚£ä¹ˆæ˜¾è€Œæ˜“è§ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œè€ƒè™‘å¦‚ä¸‹çš„é€’å½’ç±»å‹å£°æ˜ï¼š</p><pre><code class="language-julia-repl">julia&gt; mutable struct SelfReferential
           obj::SelfReferential
       end
</code></pre><p>è¿™ç§ç±»å‹å¯èƒ½çœ‹èµ·æ¥æ²¡ä»€ä¹ˆå¤§ä¸äº†ï¼Œç›´åˆ°æˆ‘ä»¬è€ƒè™‘å¦‚ä½•æ¥æ„é€ å®ƒçš„å®ä¾‹ã€‚ å¦‚æœ <code>a</code> æ˜¯ <code>SelfReferential</code> çš„ä¸€ä¸ªå®ä¾‹ï¼Œåˆ™ç¬¬äºŒä¸ªå®ä¾‹å¯ä»¥ç”¨å¦‚ä¸‹çš„è°ƒç”¨æ¥åˆ›å»ºï¼š</p><pre><code class="language-julia-repl">julia&gt; b = SelfReferential(a)</code></pre><p>ä½†æ˜¯ï¼Œå½“æ²¡æœ‰å®ä¾‹å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå³æ²¡æœ‰å¯ä»¥ä¼ é€’ç»™ <code>obj</code> æˆå‘˜å˜é‡çš„æœ‰æ•ˆå€¼æ—¶ï¼Œå¦‚ä½•æ„é€ ç¬¬ä¸€ä¸ªå®ä¾‹ï¼Ÿå”¯ä¸€çš„è§£å†³æ–¹æ¡ˆæ˜¯å…è®¸ä½¿ç”¨æœªåˆå§‹åŒ–çš„ <code>obj</code> æˆå‘˜æ¥åˆ›å»ºä¸€ä¸ªæœªå®Œå…¨åˆå§‹åŒ–çš„ <code>SelfReferential</code> å®ä¾‹ï¼Œå¹¶ä½¿ç”¨è¯¥ä¸å®Œæ•´çš„å®ä¾‹ä½œä¸ºå¦ä¸€ä¸ªå®ä¾‹çš„ <code>obj</code> æˆå‘˜çš„æœ‰æ•ˆå€¼ï¼Œä¾‹å¦‚ï¼Œå®ƒæœ¬èº«ã€‚</p><p>ä¸ºäº†å…è®¸åˆ›å»ºæœªå®Œå…¨åˆå§‹åŒ–çš„å¯¹è±¡ï¼ŒJulia å…è®¸ä½¿ç”¨å°‘äºè¯¥ç±»å‹æˆå‘˜æ•°çš„å‚æ•°æ¥è°ƒç”¨ <a href="manual/@ ref"><code>new</code></a> å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå…·æœ‰æŸä¸ªæœªåˆå§‹åŒ–æˆå‘˜çš„å¯¹è±¡ã€‚ç„¶åï¼Œå†…éƒ¨æ„é€ å‡½æ•°å¯ä»¥ä½¿ç”¨ä¸å®Œæ•´çš„å¯¹è±¡ï¼Œåœ¨è¿”å›ä¹‹å‰å®Œæˆåˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰ <code>SelfReferential</code> ç±»å‹æ—¶é‡‡ç”¨äº†å¦ä¸€ä¸ªæ–¹æ³•ï¼Œä½¿ç”¨é›¶å‚æ•°å†…éƒ¨æ„é€ å‡½æ•°æ¥è¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œæ­¤å®ä¾‹çš„ <code>obj</code> æˆå‘˜æŒ‡å‘å…¶è‡ªèº«ï¼š</p><pre><code class="language-julia-repl">julia&gt; mutable struct SelfReferential
           obj::SelfReferential
           SelfReferential() = (x = new(); x.obj = x)
       end
</code></pre><p>æˆ‘ä»¬å¯ä»¥éªŒè¯è¿™ä¸€æ„é€ å‡½æ•°æœ‰æ•ˆæ€§ï¼Œä¸”ç”±å…¶æ„é€ çš„å¯¹è±¡ç¡®å®æ˜¯è‡ªå¼•ç”¨çš„ï¼š</p><pre><code class="language-julia-repl">julia&gt; x = SelfReferential();

julia&gt; x === x
true

julia&gt; x === x.obj
true

julia&gt; x === x.obj.obj
true</code></pre><p>è™½ç„¶ä»ä¸€ä¸ªå†…éƒ¨æ„é€ å‡½æ•°ä¸­è¿”å›ä¸€ä¸ªå®Œå…¨åˆå§‹åŒ–çš„å¯¹è±¡æ˜¯å¾ˆå¥½çš„ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥è¿”å›æœªå®Œå…¨åˆå§‹åŒ–çš„å¯¹è±¡ï¼š</p><pre><code class="language-julia-repl">julia&gt; mutable struct Incomplete
           data
           Incomplete() = new()
       end

julia&gt; z = Incomplete();</code></pre><p>å°½ç®¡å…è®¸åˆ›å»ºå«æœ‰æœªåˆå§‹åŒ–æˆå‘˜çš„å¯¹è±¡ï¼Œç„¶è€Œä»»ä½•å¯¹æœªåˆå§‹åŒ–å¼•ç”¨çš„è®¿é—®éƒ½ä¼šç«‹å³æŠ¥é”™ï¼š</p><pre><code class="language-julia-repl">julia&gt; z.data
ERROR: UndefRefError: access to undefined reference</code></pre><p>è¿™é¿å…äº†ä¸æ–­åœ°æ£€æµ‹ <code>null</code> å€¼çš„éœ€è¦ã€‚ç„¶è€Œï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡æˆå‘˜éƒ½æ˜¯å¼•ç”¨ã€‚Julia ä¼šå°†ä¸€äº›ç±»å‹å½“ä½œçº¯æ•°æ®ï¼ˆ&quot;plain data&quot;ï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒä»¬çš„æ•°æ®æ˜¯è‡ªåŒ…å«çš„ï¼Œå¹¶ä¸”æ²¡æœ‰å¼•ç”¨å…¶å®ƒå¯¹è±¡ã€‚è¿™äº›çº¯æ•°æ®åŒ…æ‹¬åŸå§‹ç±»å‹ï¼ˆæ¯”å¦‚ <code>Int</code> ï¼‰å’Œç”±å…¶å®ƒçº¯æ•°æ®ç±»å‹æ„æˆçš„ä¸å¯å˜ç»“æ„ä½“ã€‚çº¯æ•°æ®ç±»å‹çš„åˆå§‹å€¼æ˜¯æœªå®šä¹‰çš„ï¼š</p><pre><code class="language-julia-repl">julia&gt; struct HasPlain
           n::Int
           HasPlain() = new()
       end

julia&gt; HasPlain()
HasPlain(438103441441)</code></pre><p>ç”±çº¯æ•°æ®ç»„æˆçš„æ•°ç»„ä¹Ÿå…·æœ‰ä¸€æ ·çš„è¡Œä¸ºã€‚</p><p>åœ¨å†…éƒ¨æ„é€ å‡½æ•°ä¸­ï¼Œä½ å¯ä»¥å°†ä¸å®Œæ•´çš„å¯¹è±¡ä¼ é€’ç»™å…¶å®ƒå‡½æ•°æ¥å§”æ‰˜å…¶è¡¥å…¨æ„é€ ï¼š</p><pre><code class="language-julia-repl">julia&gt; mutable struct Lazy
           data
           Lazy(v) = complete_me(new(), v)
       end</code></pre><p>ä¸æ„é€ å‡½æ•°è¿”å›çš„ä¸å®Œæ•´å¯¹è±¡ä¸€æ ·ï¼Œå¦‚æœ <code>complete_me</code> æˆ–å…¶ä»»ä½•è¢«è°ƒç”¨è€…å°è¯•åœ¨åˆå§‹åŒ–ä¹‹å‰è®¿é—® <code>Lazy</code> å¯¹è±¡çš„ <code>data</code> å­—æ®µï¼Œå°±ä¼šç«‹åˆ»æŠ¥é”™ã€‚</p><h2 id="å‚æ•°ç±»å‹çš„æ„é€ å‡½æ•°"><a class="docs-heading-anchor" href="#å‚æ•°ç±»å‹çš„æ„é€ å‡½æ•°">å‚æ•°ç±»å‹çš„æ„é€ å‡½æ•°</a><a id="å‚æ•°ç±»å‹çš„æ„é€ å‡½æ•°-1"></a><a class="docs-heading-anchor-permalink" href="#å‚æ•°ç±»å‹çš„æ„é€ å‡½æ•°" title="Permalink"></a></h2><p>å‚æ•°ç±»å‹çš„å­˜åœ¨ä¸ºæ„é€ å‡½æ•°å¢åŠ äº†æ›´å¤šçš„å¤æ‚æ€§ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹<a href="../types/#å‚æ•°ç±»å‹">å‚æ•°ç±»å‹</a>ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ç§æ–¹æ³•æ¥å®ä¾‹åŒ–å‚æ•°å¤åˆç±»å‹ï¼Œä¸€ç§æ˜¯æ˜¾å¼åœ°æä¾›ç±»å‹å‚æ•°ï¼Œå¦ä¸€ç§æ˜¯è®© Julia æ ¹æ®æ„é€ å‡½æ•°è¾“å…¥å‚æ•°çš„ç±»å‹æ¥éšå¼åœ°æ¨å¯¼ç±»å‹å‚æ•°ã€‚è¿™é‡Œæœ‰ä¸€äº›ä¾‹å­ï¼š</p><pre><code class="language-julia-repl">julia&gt; struct Point{T&lt;:Real}
           x::T
           y::T
       end

julia&gt; Point(1,2) ## éšå¼çš„ T ##
Point{Int64}(1, 2)

julia&gt; Point(1.0,2.5) ## éšå¼çš„ T ##
Point{Float64}(1.0, 2.5)

julia&gt; Point(1,2.5) ## éšå¼çš„ T ##
ERROR: MethodError: no method matching Point(::Int64, ::Float64)
Closest candidates are:
  Point(::T, ::T) where T&lt;:Real at none:2

julia&gt; Point{Int64}(1, 2) ## æ˜¾å¼çš„ T ##
Point{Int64}(1, 2)

julia&gt; Point{Int64}(1.0,2.5) ## æ˜¾å¼çš„ T ##
ERROR: InexactError: Int64(2.5)
Stacktrace:
[...]

julia&gt; Point{Float64}(1.0, 2.5) ## æ˜¾å¼çš„ T ##
Point{Float64}(1.0, 2.5)

julia&gt; Point{Float64}(1,2) ## æ˜¾å¼çš„ T ##
Point{Float64}(1.0, 2.0)</code></pre><p>å°±åƒä½ çœ‹åˆ°çš„é‚£æ ·ï¼Œç”¨ç±»å‹å‚æ•°æ˜¾å¼åœ°è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå…¶å‚æ•°ä¼šè¢«è½¬æ¢ä¸ºæŒ‡å®šçš„ç±»å‹ï¼š<code>Point{Int64}(1,2)</code> å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯ <code>Point{Int64}(1.0,2.5)</code> åˆ™ä¼šåœ¨å°† <code>2.5</code> è½¬æ¢ä¸º <a href="../../base/numbers/#Core.Int64"><code>Int64</code></a> çš„æ—¶å€™æŠ¥ä¸€ä¸ª <a href="../../base/base/#Core.InexactError"><code>InexactError</code></a>ã€‚å½“ç±»å‹æ˜¯ä»æ„é€ å‡½æ•°çš„å‚æ•°éšå¼æ¨å¯¼å‡ºæ¥çš„æ—¶å€™ï¼Œæ¯”å¦‚åœ¨ä¾‹å­ <code>Point(1,2)</code> ä¸­ï¼Œè¾“å…¥å‚æ•°çš„ç±»å‹å¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™å°±æ— æ³•ç¡®å®š <code>T</code> æ˜¯ä»€ä¹ˆï¼Œä½† <code>Point</code> çš„æ„é€ å‡½æ•°ä»å¯ä»¥é€‚é…ä»»æ„åŒç±»å‹çš„å®æ•°å¯¹ã€‚</p><p>å®é™…ä¸Šï¼Œè¿™é‡Œçš„ <code>Point</code>ï¼Œ<code>Point{Float64}</code> ä»¥åŠ <code>Point{Int64}</code> æ˜¯ä¸åŒçš„æ„é€ å‡½æ•°ã€‚<code>Point{T}</code> è¡¨ç¤ºå¯¹äºæ¯ä¸ªç±»å‹ <code>T</code> éƒ½å­˜åœ¨ä¸€ä¸ªä¸åŒçš„æ„é€ å‡½æ•°ã€‚å¦‚æœä¸æ˜¾å¼æä¾›å†…éƒ¨æ„é€ å‡½æ•°ï¼Œåœ¨å£°æ˜å¤åˆç±»å‹ <code>Point{T&lt;:Real}</code> çš„æ—¶å€™ï¼ŒJulia ä¼šå¯¹æ¯ä¸ªæ»¡è¶³ <code>T&lt;:Real</code> æ¡ä»¶çš„ç±»å‹éƒ½æä¾›ä¸€ä¸ªé»˜è®¤çš„å†…éƒ¨æ„é€ å‡½æ•° <code>Point{T}</code>ï¼Œå®ƒä»¬çš„è¡Œä¸ºä¸éå‚æ•°ç±»å‹çš„é»˜è®¤å†…éƒ¨æ„é€ å‡½æ•°ä¸€è‡´ã€‚Julia åŒæ—¶ä¹Ÿä¼šæä¾›äº†ä¸€ä¸ªé€šç”¨çš„å¤–éƒ¨æ„é€ å‡½æ•° <code>Point</code>ï¼Œç”¨äºé€‚é…ä»»æ„åŒç±»å‹çš„å®æ•°å¯¹ã€‚Julia é»˜è®¤æä¾›çš„æ„é€ å‡½æ•°ç­‰ä»·äºä¸‹é¢è¿™ç§æ˜¾å¼çš„å£°æ˜ï¼š</p><pre><code class="language-julia-repl">julia&gt; struct Point{T&lt;:Real}
           x::T
           y::T
           Point{T}(x,y) where {T&lt;:Real} = new(x,y)
       end

julia&gt; Point(x::T, y::T) where {T&lt;:Real} = Point{T}(x,y);</code></pre><p>æ³¨æ„ï¼Œæ¯ä¸ªæ„é€ å‡½æ•°å®šä¹‰çš„æ–¹å¼ä¸è°ƒç”¨å®ƒä»¬çš„æ–¹å¼æ˜¯ä¸€æ ·çš„ã€‚è°ƒç”¨ <code>Point{Int64}(1,2)</code> ä¼šè§¦å‘ <code>struct</code> å—å†…éƒ¨çš„ <code>Point{T}(x,y)</code>ã€‚å¦ä¸€æ–¹é¢ï¼Œå¤–éƒ¨æ„é€ å‡½æ•°å£°æ˜çš„ <code>Point</code> æ„é€ å‡½æ•°åªä¼šè¢«åŒç±»å‹çš„å®æ•°å¯¹è§¦å‘ï¼Œå®ƒä½¿å¾—æˆ‘ä»¬å¯ä»¥ç›´æ¥ä»¥ <code>Point(1,2)</code> å’Œ <code>Point(1.0,2.5)</code> è¿™ç§æ–¹å¼æ¥åˆ›å»ºå®ä¾‹ï¼Œè€Œä¸éœ€è¦æ˜¾ç¤ºåœ°ä½¿ç”¨ç±»å‹å‚æ•°ã€‚ç”±äºæ­¤æ–¹æ³•çš„å£°æ˜æ–¹å¼å·²ç»å¯¹è¾“å…¥å‚æ•°çš„ç±»å‹æ–½åŠ äº†çº¦æŸï¼Œåƒ <code>Point(1,2.5)</code> è¿™ç§è°ƒç”¨è‡ªç„¶ä¼šå¯¼è‡´ &quot;no method&quot; é”™è¯¯ã€‚</p><p>å‡å¦‚æˆ‘ä»¬æƒ³è®© <code>Point(1,2.5)</code> è¿™ç§è°ƒç”¨æ–¹å¼æ­£å¸¸å·¥ä½œï¼Œæ¯”å¦‚ï¼Œé€šè¿‡å°†æ•´æ•° <code>1</code> è‡ªåŠ¨ã€Œæå‡ã€ä¸ºæµ®ç‚¹æ•° <code>1.0</code>ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯åƒä¸‹é¢è¿™æ ·å®šä¹‰ä¸€ä¸ªé¢å¤–çš„å¤–éƒ¨æ„é€ å‡½æ•°ï¼š</p><pre><code class="language-julia-repl">julia&gt; Point(x::Int64, y::Float64) = Point(convert(Float64,x),y);</code></pre><p>æ­¤æ–¹æ³•ä½¿ç”¨ <a href="../../base/base/#Base.convert"><code>convert</code></a> å‡½æ•°å°† <code>x</code> æ˜¾å¼è½¬æ¢ä¸º <a href="../../base/numbers/#Core.Float64"><code>Float64</code></a>ï¼Œç„¶ååœ¨ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯ <a href="../../base/numbers/#Core.Float64"><code>Float64</code></a> çš„æƒ…å†µä¸‹ä½¿ç”¨é€šç”¨çš„æ„é€ å‡½æ•°ã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•å®šä¹‰ï¼Œä»¥å‰çš„æŠ¥<a href="../../base/base/#Core.MethodError"><code>MethodError</code></a>çš„ä»£ç ç°åœ¨å¯ä»¥æˆåŠŸåœ°åˆ›å»ºä¸€ä¸ªç±»å‹ä¸º <code>Point{Float64}</code> çš„ç‚¹ï¼š</p><pre><code class="language-julia-repl">julia&gt; p = Point(1,2.5)
Point{Float64}(1.0, 2.5)

julia&gt; typeof(p)
Point{Float64}</code></pre><p>ç„¶è€Œï¼Œå…¶å®ƒç±»ä¼¼çš„è°ƒç”¨ä¾ç„¶æœ‰é—®é¢˜ï¼š</p><pre><code class="language-julia-repl">julia&gt; Point(1.5,2)
ERROR: MethodError: no method matching Point(::Float64, ::Int64)
Closest candidates are:
  Point(::T, !Matched::T) where T&lt;:Real at none:1</code></pre><p>å¦‚æœä½ æƒ³è¦æ‰¾åˆ°ä¸€ç§æ–¹æ³•å¯ä»¥ä½¿ç±»ä¼¼çš„è°ƒç”¨éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œè¯·å‚é˜…<a href="../conversion-and-promotion/#conversion-and-promotion">ç±»å‹è½¬æ¢ä¸ç±»å‹æå‡</a>ã€‚è¿™é‡Œç¨ç¨â€œå‰§é€â€ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸‹é¢çš„è¿™ä¸ªå¤–éƒ¨æ„é€ å‡½æ•°æ¥æ»¡è¶³éœ€æ±‚ï¼Œæ— è®ºè¾“å…¥å‚æ•°çš„ç±»å‹å¦‚ä½•ï¼Œå®ƒéƒ½å¯ä»¥è§¦å‘é€šç”¨çš„ <code>Point</code> æ„é€ å‡½æ•°ï¼š</p><pre><code class="language-julia-repl">julia&gt; Point(x::Real, y::Real) = Point(promote(x,y)...);</code></pre><p>è¿™é‡Œçš„ <code>promote</code> å‡½æ•°ä¼šå°†å®ƒçš„è¾“å…¥è½¬åŒ–ä¸ºåŒä¸€ç±»å‹ï¼Œåœ¨æ­¤ä¾‹ä¸­æ˜¯ <a href="../../base/numbers/#Core.Float64"><code>Float64</code></a>ã€‚å®šä¹‰äº†è¿™ä¸ªæ–¹æ³•ï¼Œ<code>Point</code> æ„é€ å‡½æ•°ä¼šè‡ªåŠ¨æå‡è¾“å…¥å‚æ•°çš„ç±»å‹ï¼Œä¸”æå‡æœºåˆ¶ä¸ç®—æœ¯è¿ç®—ç¬¦ç›¸åŒï¼Œæ¯”å¦‚ <a href="../../base/math/#Base.:+"><code>+</code></a>ï¼Œå› æ­¤å¯¹æ‰€æœ‰çš„å®æ•°è¾“å…¥å‚æ•°éƒ½é€‚ç”¨ï¼š</p><pre><code class="language-julia-repl">julia&gt; Point(1.5,2)
Point{Float64}(1.5, 2.0)

julia&gt; Point(1,1//2)
Point{Rational{Int64}}(1//1, 1//2)

julia&gt; Point(1.0,1//2)
Point{Float64}(1.0, 0.5)</code></pre><p>Thus, while the implicit type parameter constructors provided by default in Julia are fairly strict, it is possible to make them behave in a more relaxed but sensible manner quite easily. Moreover, since constructors can leverage all of the power of the type system, methods, and multiple dispatch, defining sophisticated behavior is typically quite simple.</p><h2 id="Case-Study:-Rational"><a class="docs-heading-anchor" href="#Case-Study:-Rational">Case Study: Rational</a><a id="Case-Study:-Rational-1"></a><a class="docs-heading-anchor-permalink" href="#Case-Study:-Rational" title="Permalink"></a></h2><p>Perhaps the best way to tie all these pieces together is to present a real world example of a parametric composite type and its constructor methods. To that end, we implement our own rational number type <code>OurRational</code>, similar to Julia&#39;s built-in <a href="../../base/numbers/#Base.Rational"><code>Rational</code></a> type, defined in <a href="https://github.com/JuliaLang/julia/blob/master/base/rational.jl"><code>rational.jl</code></a>:</p><pre><code class="language-julia-repl">julia&gt; struct OurRational{T&lt;:Integer} &lt;: Real
           num::T
           den::T
           function OurRational{T}(num::T, den::T) where T&lt;:Integer
               if num == 0 &amp;&amp; den == 0
                    error(&quot;invalid rational: 0//0&quot;)
               end
               num = flipsign(num, den)
               den = flipsign(den, den)
               g = gcd(num, den)
               num = div(num, g)
               den = div(den, g)
               new(num, den)
           end
       end

julia&gt; OurRational(n::T, d::T) where {T&lt;:Integer} = OurRational{T}(n,d)
OurRational

julia&gt; OurRational(n::Integer, d::Integer) = OurRational(promote(n,d)...)
OurRational

julia&gt; OurRational(n::Integer) = OurRational(n,one(n))
OurRational

julia&gt; âŠ˜(n::Integer, d::Integer) = OurRational(n,d)
âŠ˜ (generic function with 1 method)

julia&gt; âŠ˜(x::OurRational, y::Integer) = x.num âŠ˜ (x.den*y)
âŠ˜ (generic function with 2 methods)

julia&gt; âŠ˜(x::Integer, y::OurRational) = (x*y.den) âŠ˜ y.num
âŠ˜ (generic function with 3 methods)

julia&gt; âŠ˜(x::Complex, y::Real) = complex(real(x) âŠ˜ y, imag(x) âŠ˜ y)
âŠ˜ (generic function with 4 methods)

julia&gt; âŠ˜(x::Real, y::Complex) = (x*y&#39;) âŠ˜ real(y*y&#39;)
âŠ˜ (generic function with 5 methods)

julia&gt; function âŠ˜(x::Complex, y::Complex)
           xy = x*y&#39;
           yy = real(y*y&#39;)
           complex(real(xy) âŠ˜ yy, imag(xy) âŠ˜ yy)
       end
âŠ˜ (generic function with 6 methods)</code></pre><p>ç¬¬ä¸€è¡Œ â€“ <code>struct OurRational{T&lt;:Integer} &lt;: Real</code> â€“ å£°æ˜äº† <code>OurRational</code> ä¼šæ¥æ”¶ä¸€ä¸ªæ•´æ•°ç±»å‹çš„ç±»å‹å‚æ•°ï¼Œä¸”å®ƒè‡ªå·±å±äºå®æ•°ç±»å‹ã€‚å®ƒå£°æ˜äº†ä¸¤ä¸ªæˆå‘˜ï¼š<code>num::T</code> å’Œ <code>den::T</code>ã€‚è¿™è¡¨æ˜ä¸€ä¸ª <code>OurRational{T}</code> çš„å®ä¾‹ä¸­ä¼šåŒ…å«ä¸€å¯¹æ•´æ•°ï¼Œä¸”ç±»å‹ä¸º <code>T</code>ï¼Œå…¶ä¸­ä¸€ä¸ªè¡¨ç¤ºåˆ†å­ï¼Œå¦ä¸€ä¸ªè¡¨ç¤ºåˆ†æ¯ã€‚</p><p>Now things get interesting. <code>OurRational</code> has a single inner constructor method which checks that <code>num</code> and <code>den</code> aren&#39;t both zero and ensures that every rational is constructed in &quot;lowest terms&quot; with a non-negative denominator. This is accomplished by first flipping the signs of numerator and denominator if the denominator is negative. Then, both are divided by their greatest common divisor (<code>gcd</code> always returns a non-negative number, regardless of the sign of its arguments). Because this is the only inner constructor for <code>OurRational</code>, we can be certain that <code>OurRational</code> objects are always constructed in this normalized form.</p><p>ä¸ºäº†æ–¹ä¾¿ï¼Œ<code>OurRational</code> ä¹Ÿæä¾›äº†ä¸€äº›å…¶å®ƒçš„å¤–éƒ¨æ„é€ å‡½æ•°ã€‚ç¬¬ä¸€ä¸ªå¤–éƒ¨æ„é€ å‡½æ•°æ˜¯â€œæ ‡å‡†çš„â€é€šç”¨æ„é€ å‡½æ•°ï¼Œå½“åˆ†å­å’Œåˆ†æ¯çš„ç±»å‹ä¸€è‡´æ—¶ï¼Œå®ƒå°±å¯ä»¥æ¨å¯¼å‡ºç±»å‹å‚æ•° <code>T</code>ã€‚ç¬¬äºŒä¸ªå¤–éƒ¨æ„é€ å‡½æ•°å¯ä»¥ç”¨äºåˆ†å­å’Œåˆ†æ¯çš„ç±»å‹ä¸ä¸€è‡´çš„æƒ…æ™¯ï¼Œå®ƒä¼šå°†åˆ†å­å’Œåˆ†æ¯çš„ç±»å‹æå‡è‡³ä¸€ä¸ªå…±åŒçš„ç±»å‹ï¼Œç„¶åå†å§”æ‰˜ç¬¬ä¸€ä¸ªå¤–éƒ¨æ„é€ å‡½æ•°è¿›è¡Œæ„é€ ã€‚ç¬¬ä¸‰ä¸ªæ„é€ å‡½æ•°ä¼šå°†ä¸€ä¸ªæ•´æ•°è½¬åŒ–ä¸ºåˆ†æ•°ï¼Œæ–¹æ³•æ˜¯å°† 1 å½“ä½œåˆ†æ¯ã€‚</p><p>Following the outer constructor definitions, we defined a number of methods for the <code>âŠ˜</code> operator, which provides a syntax for writing rationals (e.g. <code>1 âŠ˜ 2</code>). Julia&#39;s <code>Rational</code> type uses the <a href="../../base/math/#Base.://"><code>//</code></a> operator for this purpose. Before these definitions, <code>âŠ˜</code> is a completely undefined operator with only syntax and no meaning. Afterwards, it behaves just as described in <a href="manual/@ref">Rational Numbers</a> â€“ its entire behavior is defined in these few lines. The first and most basic definition just makes <code>a âŠ˜ b</code> construct a <code>OurRational</code> by applying the <code>OurRational</code> constructor to <code>a</code> and <code>b</code> when they are integers. When one of the operands of <code>âŠ˜</code> is already a rational number, we construct a new rational for the resulting ratio slightly differently; this behavior is actually identical to division of a rational with an integer. Finally, applying <code>âŠ˜</code> to complex integral values creates an instance of <code>Complex{&lt;:OurRational}</code> â€“ a complex number whose real and imaginary parts are rationals:</p><pre><code class="language-julia-repl">julia&gt; z = (1 + 2im) âŠ˜ (1 - 2im);

julia&gt; typeof(z)
Complex{OurRational{Int64}}

julia&gt; typeof(z) &lt;: Complex{&lt;:OurRational}
true</code></pre><p>Thus, although the <code>âŠ˜</code> operator usually returns an instance of <code>OurRational</code>, if either of its arguments are complex integers, it will return an instance of <code>Complex{&lt;:OurRational}</code> instead. The interested reader should consider perusing the rest of <a href="https://github.com/JuliaLang/julia/blob/master/base/rational.jl"><code>rational.jl</code></a>: it is short, self-contained, and implements an entire basic Julia type.</p><h2 id="Outer-only-constructors"><a class="docs-heading-anchor" href="#Outer-only-constructors">Outer-only constructors</a><a id="Outer-only-constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Outer-only-constructors" title="Permalink"></a></h2><p>As we have seen, a typical parametric type has inner constructors that are called when type parameters are known; e.g. they apply to <code>Point{Int}</code> but not to <code>Point</code>. Optionally, outer constructors that determine type parameters automatically can be added, for example constructing a <code>Point{Int}</code> from the call <code>Point(1,2)</code>. Outer constructors call inner constructors to actually make instances. However, in some cases one would rather not provide inner constructors, so that specific type parameters cannot be requested manually.</p><p>For example, say we define a type that stores a vector along with an accurate representation of its sum:</p><pre><code class="language-julia-repl">julia&gt; struct SummedArray{T&lt;:Number,S&lt;:Number}
           data::Vector{T}
           sum::S
       end

julia&gt; SummedArray(Int32[1; 2; 3], Int32(6))
SummedArray{Int32, Int32}(Int32[1, 2, 3], 6)</code></pre><p>é—®é¢˜åœ¨äºæˆ‘ä»¬æƒ³è®© <code>S</code> çš„ç±»å‹å§‹ç»ˆæ¯” <code>T</code> å¤§ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†ç¡®ä¿ç´¯åŠ è¿‡ç¨‹ä¸ä¼šä¸¢å¤±ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå½“ <code>T</code> æ˜¯ <a href="../../base/numbers/#Core.Int32"><code>Int32</code></a> æ—¶ï¼Œæˆ‘ä»¬æƒ³è®© <code>S</code> æ˜¯ <a href="../../base/numbers/#Core.Int64"><code>Int64</code></a>ã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³è¦ä¸€ç§æ¥å£æ¥ç¦æ­¢ç”¨æˆ·åˆ›å»ºåƒ <code>SummedArray{Int32,Int32}</code> è¿™ç§ç±»å‹çš„å®ä¾‹ã€‚ä¸€ç§å®ç°æ–¹å¼æ˜¯åªæä¾›ä¸€ä¸ª <code>SummedArray</code> æ„é€ å‡½æ•°ï¼Œå½“éœ€è¦å°†å…¶æ”¾å…¥ <code>struct</code>-block ä¸­ï¼Œä»è€Œä¸è®© Julia æä¾›é»˜è®¤çš„æ„é€ å‡½æ•°ï¼š</p><pre><code class="language-julia-repl">julia&gt; struct SummedArray{T&lt;:Number,S&lt;:Number}
           data::Vector{T}
           sum::S
           function SummedArray(a::Vector{T}) where T
               S = widen(T)
               new{T,S}(a, sum(S, a))
           end
       end

julia&gt; SummedArray(Int32[1; 2; 3], Int32(6))
ERROR: MethodError: no method matching SummedArray(::Vector{Int32}, ::Int32)
Closest candidates are:
  SummedArray(::Vector{T}) where T at none:4
Stacktrace:
[...]</code></pre><p>æ­¤æ„é€ å‡½æ•°å°†ä¼šè¢« <code>SummedArray(a)</code> è¿™ç§å†™æ³•è§¦å‘ã€‚<code>new{T,S}</code> çš„è¿™ç§å†™æ³•å…è®¸æŒ‡å®šå¾…æ„å»ºç±»å‹çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´è°ƒç”¨å®ƒä¼šè¿”å›ä¸€ä¸ª <code>SummedArray{T,S}</code> çš„å®ä¾‹ã€‚<code>new{T,S}</code> ä¹Ÿå¯ä»¥ç”¨äºå…¶å®ƒæ„é€ å‡½æ•°çš„å®šä¹‰ä¸­ï¼Œä½†ä¸ºäº†æ–¹ä¾¿ï¼ŒJulia ä¼šæ ¹æ®æ­£åœ¨æ„é€ çš„ç±»å‹è‡ªåŠ¨æ¨å¯¼å‡º <code>new{}</code> èŠ±æ‹¬å·é‡Œçš„å‚æ•°ï¼ˆå¦‚æœå¯è¡Œçš„è¯ï¼‰ã€‚</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>å‘½åæ³•ï¼šè™½ç„¶æœ¯è¯­ã€Œæ„é€ å‡½æ•°ã€é€šå¸¸æ˜¯æŒ‡ç”¨äºæ„é€ ç±»å‹å¯¹è±¡çš„å‡½æ•°å…¨ä½“ï¼Œä½†é€šå¸¸ä¼šç•¥å¾®æ»¥ç”¨æœ¯è¯­å°†ç‰¹å®šçš„æ„é€ æ–¹æ³•ç§°ä¸ºã€Œæ„é€ å‡½æ•°ã€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šå¸¸å¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æ¸…æ¥šåœ°è¾¨åˆ«å‡ºæœ¯è¯­è¡¨ç¤ºçš„æ˜¯ã€Œæ„é€ æ–¹æ³•ã€è€Œä¸æ˜¯ã€Œæ„é€ å‡½æ•°ã€ï¼Œå°¤å…¶æ˜¯åœ¨è®¨è®ºæŸä¸ªç‰¹åˆ«çš„ã€Œæ„é€ æ–¹æ³•ã€çš„æ—¶å€™ã€‚</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../methods/">Â« æ–¹æ³•</a><a class="docs-footer-nextpage" href="../conversion-and-promotion/">ç±»å‹è½¬æ¢å’Œç±»å‹æå‡ Â»</a><div class="flexbox-break"></div><p class="footer-message">ğŸ“¢ğŸ“¢ğŸ“¢Juliaä¸­æ–‡ç¤¾åŒºç°å·²åŠ å…¥â€œå¼€æºè½¯ä»¶ä¾›åº”é“¾ç‚¹äº®è®¡åˆ’â€ï¼Œå¦‚æœä½ æƒ³æ”¹å–„Juliaä¸­æ–‡æ–‡æ¡£çš„ç¿»è¯‘ï¼Œé‚£å°±èµ¶å¿«æ¥ <a href="https://summer.iscas.ac.cn/#/org/prodetail/210370191">æŠ¥å</a> å§ï¼</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">è®¾ç½®</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">é€‰æ‹©ä¸»é¢˜</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>æœ¬æ–‡æ¡£åœ¨<span class="colophon-date" title="2021 å…«æœˆ 13 å‘¨äº” 15:31">2021 å…«æœˆ 13 å‘¨äº”</span>ç”±<a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a>ä½¿ç”¨1.6.2ç‰ˆæœ¬çš„Juliaç”Ÿæˆã€‚</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
